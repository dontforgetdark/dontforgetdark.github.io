---
layout: post
title: Con trỏ hàm
subtitle: stackoverflow
tags: [typedef, function pointer]
---
Nội dung được tham khảo tại [stackoverflow](https://stackoverflow.com/questions/4295432/typedef-function-pointer)

## Typedef function pointer

`typedef`là một cấu trúc ngôn ngữ liên kết tên với một kiểu.
Bạn sử dụng nó giống như cách bạn sẽ sử dụng kiểu gốc, chẳng hạn:
```cpp
  typedef int myinteger;
  typedef char *mystring;
  typedef void (*myfunc)();
```
sử dụng chúng như

```cpp
  myinteger i;   // is equivalent to    int i;
  mystring s;    // is the same as      char *s;
  myfunc f;      // compile equally as  void (*f)();
```
Thí dụ:
```cpp
typedef int (*t_somefunc)(int,int);

int product(int u, int v) {
  return u*v;
}

t_somefunc afunc = &product;
...
int x2 = (*afunc)(123, 456); // call product() to calculate 123*456
```
## C++11

Nếu bạn có thể sử dụng C ++ 11, bạn có thể muốn sử dụng từ khoá `std::function`và `using`.
```cpp
using FunctionFunc = std::function<void(int arg1, std::string arg2)>;
```

Ví dụ về đoạn code có sử dụng con trỏ hàm
```cpp
#include <bits/stdc++.h>
using namespace std;
int minn(int a, int b){
	return (a<b? a: b);
}
int maxx(int a, int b){
	return (a>b? a: b);
}
struct segment_tree{
	int n, init;
	vector<int> v;
	function<int(int,int)> change;
	segment_tree(int x, int z, function<int(int,int)> y){
		n=x;
		v.assign(2*n, 0);
		change=y;
		init=z;
	}
	void update(int p, int val){
		p+=n;
		v[p]=val;
		for(p/=2; p>0; p/=2){
			v[p]=change(v[p*2], v[p*2+1]);
		}
	}
	int get(int l, int r){
		int res=init;
		l+=n, r+=n;
		while(l<=r){
			if(l%2==1) res=change(res, v[l++]);
			if(r%2==0) res=change(res, v[r--]);
			l/=2, r/=2;
		}
		return res;
	}
};
int main(){
	ios::sync_with_stdio(false); cin.tie(0); cout.tie(0);
	int n, q;
	cin >> n >> q;
	segment_tree aa(n, 0, maxx);
	segment_tree ii(n,1e9, minn);
	for(int i=0; i<n; i++){
		int x;
		cin >> x;
		aa.update(i, x);
		ii.update(i, x);
	}
	while(q--){
		int l, r;
		cin >> l >> r;
		l--, r--;
		cout << aa.get(l, r)-ii.get(l, r) << "\n";
	}
}
```
